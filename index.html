<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Puzzle</title>
<style>
  body {
    background:#000;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    margin:0;
  }

  #puzzle {
    display:grid;
    grid-template-columns: repeat(3, 80px);
    grid-template-rows: repeat(3, 80px);
    gap:4px;
  }

  .tile {
    background:#808080;
    color:#000;
    font-family: monospace;
    font-size:20px;
    display:flex;
    justify-content:center;
    align-items:center;
    cursor:pointer;
    user-select:none;
  }

  .empty {
    background:#000;
    cursor:default;
  }
</style>
</head>
<body>

<div id="puzzle"></div>

<script>
const puzzle = document.getElementById("puzzle");
let tiles = [1,2,3,4,5,6,7,8,null];

function shuffle(){
  for(let i=tiles.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [tiles[i], tiles[j]] = [tiles[j], tiles[i]];
  }
}

function render(){
  puzzle.innerHTML = "";
  tiles.forEach((value, index) => {
    const div = document.createElement("div");
    div.className = "tile";
    if(value === null){
      div.classList.add("empty");
    } else {
      div.textContent = value;
      div.onclick = () => move(index);
    }
    puzzle.appendChild(div);
  });
}

function move(index){
  const emptyIndex = tiles.indexOf(null);
  const validMoves = [
    emptyIndex - 1,
    emptyIndex + 1,
    emptyIndex - 3,
    emptyIndex + 3
  ];

  if(validMoves.includes(index)){
    [tiles[index], tiles[emptyIndex]] = [tiles[emptyIndex], tiles[index]];
    render();
    checkWin();
  }
}

function checkWin(){
  const win = [1,2,3,4,5,6,7,8,null];
  if(JSON.stringify(tiles) === JSON.stringify(win)){
    setTimeout(() => alert("ðŸ§© GelÃ¶st"), 100);
  }
}

shuffle();
render();
</script>

</body>
</html>
