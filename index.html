<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>State Puzzle</title>
<style>
  body{
    margin:0;
    background:#000;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
  }

  #grid{
    display:grid;
    grid-template-columns:repeat(3,80px);
    grid-template-rows:repeat(3,80px);
    gap:6px;
  }

  .cell{
    background:#808080;
    cursor:pointer;
    transition:opacity 0.2s;
  }

  .active{
    opacity:0.4; /* nur ein Hauch â€“ kein Hinweis */
  }
</style>
</head>
<body>

<div id="grid"></div>

<script>
const grid = document.getElementById("grid");
const size = 3;
let state = [];

// Initialisierung
for(let i=0;i<size*size;i++){
  state[i] = Math.random() > 0.5 ? 1 : 0;
}

function render(){
  grid.innerHTML = "";
  state.forEach((v,i)=>{
    const d = document.createElement("div");
    d.className = "cell" + (v ? " active" : "");
    d.onclick = ()=>toggle(i);
    grid.appendChild(d);
  });
}

function toggle(i){
  const neighbors = [
    i,
    i-1, i+1,
    i-size, i+size
  ];

  neighbors.forEach(n=>{
    if(
      n>=0 &&
      n<size*size &&
      Math.abs((n%size)-(i%size))<=1
    ){
      state[n] ^= 1;
    }
  });

  render();
  check();
}

function check(){
  if(state.every(v=>v===0)){
    // kein Text, kein Popup
    grid.style.opacity = "0.3";
  }
}

render();
</script>

</body>
</html>
